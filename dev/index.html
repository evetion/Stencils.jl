<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Stencils · Stencils.jl</title><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href>Stencils.jl</a></span></div><form class="docs-search" action="search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Stencils</a><ul class="internal"><li><a class="tocitem" href="#Stencils-2"><span>Stencils</span></a></li><li><a class="tocitem" href="#Stencil-functions"><span>Stencil functions</span></a></li><li><a class="tocitem" href="#Boundary-Conditions"><span>Boundary Conditions</span></a></li><li><a class="tocitem" href="#Padding"><span>Padding</span></a></li><li><a class="tocitem" href="#Stencil-Arrays"><span>Stencil Arrays</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Stencils</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Stencils</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/rafaqz/Stencils.jl/blob/main/docs/src/index.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Stencils"><a class="docs-heading-anchor" href="#Stencils">Stencils</a><a id="Stencils-1"></a><a class="docs-heading-anchor-permalink" href="#Stencils" title="Permalink"></a></h1><p>Main functions</p><article class="docstring"><header><a class="docstring-binding" id="Stencils.mapstencil" href="#Stencils.mapstencil"><code>Stencils.mapstencil</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">mapstencil(f, hood::Stencil, args...)</code></pre><p>Simple stencil application, where <code>f</code> is passed each stencil in <code>A</code>, returning a new array.</p><p>The result is smaller than <code>A</code> on all sides, by the stencil radius.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rafaqz/Stencils.jl/blob/5f1ee34fa4847ff97837f283eec02a702b84a6d6/src/mapstencil.jl#L1-L8">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Stencils.mapstencil!" href="#Stencils.mapstencil!"><code>Stencils.mapstencil!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">mapstencil!(f, dest, source::StencilArray, args...)
mapstencil!(f, A::SwitchingStencilArray, args...)</code></pre><p>Stencil broadcast where <code>f</code> is passed each stencil of <code>src</code>, writing the result of <code>f</code> to <code>dest</code>.</p><p>For SwitchingStencilArray the internal source and dest arrays are used, returning a switched version of the array.</p><p><code>dest</code> must either be smaller than <code>src</code> by the stencil radius on all sides, or be the same size, in which case it is assumed to also be padded.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rafaqz/Stencils.jl/blob/5f1ee34fa4847ff97837f283eec02a702b84a6d6/src/mapstencil.jl#L27-L39">source</a></section></article><h2 id="Stencils-2"><a class="docs-heading-anchor" href="#Stencils-2">Stencils</a><a class="docs-heading-anchor-permalink" href="#Stencils-2" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="Stencils.Stencil" href="#Stencils.Stencil"><code>Stencils.Stencil</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Stencil &lt;: StaticVector</code></pre><p>Stencils define a pattern of neighboring cells around the current cell. They reduce the structure and dimensions of the neighborhood into a  <code>StaticVector</code> of values.</p><p>Stencil objects are updated to contain the neighbors for an array index.</p><p>This design is so that user functions can be passed a single object from  whitch they can retreive neighbors, distances to neighbors and other  information.</p><p>Stencils also provide a range of compile-time utility funcitons like <code>distances</code> and <code>offsets</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rafaqz/Stencils.jl/blob/5f1ee34fa4847ff97837f283eec02a702b84a6d6/src/stencil.jl#L1-L16">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Stencils.AngledCross" href="#Stencils.AngledCross"><code>Stencils.AngledCross</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">AngledCross &lt;: Stencil

AngledCross(; radius=1, ndims=2)
AngledCross(radius, ndims)
AngledCross{R,N}()
AngledCross{R,N}()</code></pre><p>A neighboorhood where offsets of zero on at least N-1 axes are included in the neighborhoods</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rafaqz/Stencils.jl/blob/5f1ee34fa4847ff97837f283eec02a702b84a6d6/src/stencil.jl#L217-L227">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Stencils.BackSlash" href="#Stencils.BackSlash"><code>Stencils.BackSlash</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">BackSlash &lt;: Stencil

BackSlash(; radius=1, ndims=2)
BackSlash(radius, ndims)
BackSlash{R,N}()
BackSlash{R,N}()</code></pre><p>A neighboorhood where offsets of zero on at least N-1 axes are included in the neighborhoods</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rafaqz/Stencils.jl/blob/5f1ee34fa4847ff97837f283eec02a702b84a6d6/src/stencil.jl#L217-L227">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Stencils.Circle" href="#Stencils.Circle"><code>Stencils.Circle</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Circle &lt;: Stencil

Circle(; radius=1, ndims=2)
Circle(radius, ndims)
Circle{R,N}()
Circle{R,N}()</code></pre><p>A circular stencil</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rafaqz/Stencils.jl/blob/5f1ee34fa4847ff97837f283eec02a702b84a6d6/src/stencil.jl#L217-L227">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Stencils.Cross" href="#Stencils.Cross"><code>Stencils.Cross</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Cross &lt;: Stencil

Cross(; radius=1, ndims=2)
Cross(radius, ndims)
Cross{R,N}()
Cross{R,N}()</code></pre><p>A cross-shaped neighboorhood where offsets of zero on at least N-1 axes are included in the neighborhoods</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rafaqz/Stencils.jl/blob/5f1ee34fa4847ff97837f283eec02a702b84a6d6/src/stencil.jl#L217-L227">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Stencils.ForwardSlash" href="#Stencils.ForwardSlash"><code>Stencils.ForwardSlash</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">ForwardSlash &lt;: Stencil

ForwardSlash(; radius=1, ndims=2)
ForwardSlash(radius, ndims)
ForwardSlash{R,N}()
ForwardSlash{R,N}()</code></pre><p>A neighboorhood where offsets of zero on at least N-1 axes are included in the neighborhoods</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rafaqz/Stencils.jl/blob/5f1ee34fa4847ff97837f283eec02a702b84a6d6/src/stencil.jl#L217-L227">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Stencils.Kernel" href="#Stencils.Kernel"><code>Stencils.Kernel</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Kernel &lt;: AbstractKernelStencil

Kernel(stencil, kernel)</code></pre><p>Wrap any other stencil object, and includes a kernel of the same length and positions as the stencil.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rafaqz/Stencils.jl/blob/5f1ee34fa4847ff97837f283eec02a702b84a6d6/src/stencils/kernel.jl#L51-L58">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Stencils.Horizontal" href="#Stencils.Horizontal"><code>Stencils.Horizontal</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Horizontal &lt;: Stencil

Horizontal(; radius=1, ndims=2)
Horizontal(radius, ndims)
Horizontal{R,N}()
Horizontal{R,N}()</code></pre><p>A horizontal bar</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rafaqz/Stencils.jl/blob/5f1ee34fa4847ff97837f283eec02a702b84a6d6/src/stencil.jl#L217-L227">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Stencils.Layered" href="#Stencils.Layered"><code>Stencils.Layered</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Layered &lt;: Abstract

Layered(layers::...)</code></pre><p><code>Tuple</code> or <code>NamedTuple</code> of stencils that can be used together.</p><p><code>neighbors</code> for <code>Layered</code> returns a tuple of iterators for each stencil layer.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rafaqz/Stencils.jl/blob/5f1ee34fa4847ff97837f283eec02a702b84a6d6/src/stencils/layered.jl#L1-L10">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Stencils.Moore" href="#Stencils.Moore"><code>Stencils.Moore</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Moore &lt;: Stencil

Moore(; radius=1, ndims=2)
Moore(radius, ndims)
Moore{R,N}()
Moore{R,N}()</code></pre><p>Moore stencils define the stencil as all cells within a horizontal or vertical distance of the central cell. The central cell is omitted.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rafaqz/Stencils.jl/blob/5f1ee34fa4847ff97837f283eec02a702b84a6d6/src/stencil.jl#L217-L229">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Stencils.Positional" href="#Stencils.Positional"><code>Stencils.Positional</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Positional &lt;: AbstractPositionalStencil

Positional(coord::Tuple{Vararg{Int}}...)
Positional(offsets::Tuple{Tuple{Vararg{Int}}})
Positional{O}()</code></pre><p>Stencils that can take arbitrary shapes by specifying each coordinate, as <code>Tuple{Int,Int}</code> of the row/column distance (positive and negative) from the central point.</p><p>The stencil radius is calculated from the most distant coordinate. For simplicity the window read from the main grid is a square with sides <code>2r + 1</code> around the central point.</p><p>The dimensionality <code>N</code> of the stencil is taken from the length of the first coordinate, e.g. <code>1</code>, <code>2</code> or <code>3</code>.</p><p>Example radius <code>R = 1</code>:</p><pre><code class="nohighlight hljs">N = 1   N = 2

 ▄▄      ▀▄
          ▀</code></pre><p>Example radius <code>R = 2</code>:</p><pre><code class="nohighlight hljs">N = 1   N = 2

         ▄▄
 ▀ ▀▀   ▀███
           ▀</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rafaqz/Stencils.jl/blob/5f1ee34fa4847ff97837f283eec02a702b84a6d6/src/stencils/positional.jl#L4-L41">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Stencils.Vertical" href="#Stencils.Vertical"><code>Stencils.Vertical</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Vertical &lt;: Stencil

Vertical(; radius=1, ndims=2)
Vertical(radius, ndims)
Vertical{R,N}()
Vertical{R,N}()</code></pre><p>A vertical bar</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rafaqz/Stencils.jl/blob/5f1ee34fa4847ff97837f283eec02a702b84a6d6/src/stencil.jl#L217-L227">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Stencils.VonNeumann" href="#Stencils.VonNeumann"><code>Stencils.VonNeumann</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">VonNeumann &lt;: Stencil

VonNeumann(; radius=1, ndims=2)
VonNeumann(radius, ndims)
VonNeumann{R,N}()
VonNeumann{R,N}()</code></pre><p>Diamond-shaped neighborhood (in 2 dimwnsions), without the central cell In 1 dimension it is identical to <a href="#Stencils.Moore"><code>Moore</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rafaqz/Stencils.jl/blob/5f1ee34fa4847ff97837f283eec02a702b84a6d6/src/stencil.jl#L217-L229">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Stencils.Window" href="#Stencils.Window"><code>Stencils.Window</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Window &lt;: Stencil

Window(; radius=1, ndims=2)
Window(radius, ndims)
Window{R,N}()
Window{R,N}()</code></pre><p>A neighboorhood of radius R that includes the central cell.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rafaqz/Stencils.jl/blob/5f1ee34fa4847ff97837f283eec02a702b84a6d6/src/stencil.jl#L217-L227">source</a></section></article><h2 id="Stencil-functions"><a class="docs-heading-anchor" href="#Stencil-functions">Stencil functions</a><a id="Stencil-functions-1"></a><a class="docs-heading-anchor-permalink" href="#Stencil-functions" title="Permalink"></a></h2><p>These can be called on any <code>&lt;: Stencil</code> object, and <code>Layered</code>.</p><article class="docstring"><header><a class="docstring-binding" id="Stencils.stencil" href="#Stencils.stencil"><code>Stencils.stencil</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">stencil(x) -&gt; Stencil</code></pre><p>Returns a stencil object.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rafaqz/Stencils.jl/blob/5f1ee34fa4847ff97837f283eec02a702b84a6d6/src/stencils/kernel.jl#L16-L20">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Stencils.neighbors" href="#Stencils.neighbors"><code>Stencils.neighbors</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">neighbors(x::Stencil) -&gt; iterable</code></pre><p>Returns a basic <code>SVector</code> of all cells in the stencil.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rafaqz/Stencils.jl/blob/5f1ee34fa4847ff97837f283eec02a702b84a6d6/src/stencil.jl#L40-L44">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Stencils.offsets" href="#Stencils.offsets"><code>Stencils.offsets</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">offsets(x)</code></pre><p>Return an <code>SVector</code> of <code>NTuple{N,Int}</code>, containing all  positions in the stencil as offsets from the central cell.</p><p>Custom <code>Stencil</code>s must define this method.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rafaqz/Stencils.jl/blob/5f1ee34fa4847ff97837f283eec02a702b84a6d6/src/stencil.jl#L56-L63">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Stencils.indices" href="#Stencils.indices"><code>Stencils.indices</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">indices(x::Stencil, I::Union{Tuple,CartesianIndex})</code></pre><p>Returns an <code>SVector</code> of <code>CartesianIndices</code> for each neighbor around <code>I</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rafaqz/Stencils.jl/blob/5f1ee34fa4847ff97837f283eec02a702b84a6d6/src/stencil.jl#L70-L74">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Stencils.distances" href="#Stencils.distances"><code>Stencils.distances</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">distances(hood::Stencil)</code></pre><p>Returns an <code>SVector</code> of center-to-center distance of each stencil position from the central cell, so that horizontally or vertically adjacent cells have a distance of <code>1.0</code>, and a diagonally adjacent cell has a distance of <code>sqrt(2.0)</code>.</p><p>Values are calculated at compile time, so <code>distances</code> can be used with little overhead.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rafaqz/Stencils.jl/blob/5f1ee34fa4847ff97837f283eec02a702b84a6d6/src/stencil.jl#L81-L89">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Stencils.radius" href="#Stencils.radius"><code>Stencils.radius</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">radius(stencil) -&gt; Int</code></pre><p>Return the radius of a stencil.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rafaqz/Stencils.jl/blob/5f1ee34fa4847ff97837f283eec02a702b84a6d6/src/stencil.jl#L24-L28">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Stencils.diameter" href="#Stencils.diameter"><code>Stencils.diameter</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">diameter(rule) -&gt; Int</code></pre><p>The diameter of a stencil is <code>2r + 1</code> where <code>r</code> is the radius.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rafaqz/Stencils.jl/blob/5f1ee34fa4847ff97837f283eec02a702b84a6d6/src/stencil.jl#L32-L36">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Stencils.distance_zones" href="#Stencils.distance_zones"><code>Stencils.distance_zones</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">distance_zones(hood::Stencil)</code></pre><p>Returns an <code>SVector</code> of <code>Int</code> distance zones for each offset in the Stencil.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rafaqz/Stencils.jl/blob/5f1ee34fa4847ff97837f283eec02a702b84a6d6/src/stencil.jl#L96-L100">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Stencils.kernel" href="#Stencils.kernel"><code>Stencils.kernel</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">kernel(hood::AbstractKernelStencil) =&gt; iterable</code></pre><p>Returns the kernel object, an array or iterable matching the length of the stencil.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rafaqz/Stencils.jl/blob/5f1ee34fa4847ff97837f283eec02a702b84a6d6/src/stencils/kernel.jl#L7-L12">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Stencils.kernelproduct" href="#Stencils.kernelproduct"><code>Stencils.kernelproduct</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">kernelproduct(hood::AbstractKernelStencil)
kernelproduct(hood::Stencil, kernel)</code></pre><p>Returns the vector dot product of the stencil and the kernel, although differing from <code>dot</code> in that it is not taken iteratively for members of the stencil - they are treated as scalars.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rafaqz/Stencils.jl/blob/5f1ee34fa4847ff97837f283eec02a702b84a6d6/src/stencil.jl#L105-L112">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Stencils.unsafe_neighbors" href="#Stencils.unsafe_neighbors"><code>Stencils.unsafe_neighbors</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">unsafe_neighbors([hood::Stencil,] A::AbstractStencilArray, I::CartesianIndex) =&gt; SArray</code></pre><p>Get stencil neighbors from <code>A</code> around center <code>I</code> as an <code>SVector</code>, without checking bounds of <code>I</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rafaqz/Stencils.jl/blob/5f1ee34fa4847ff97837f283eec02a702b84a6d6/src/array.jl#L77-L81">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Stencils.unsafe_stencil" href="#Stencils.unsafe_stencil"><code>Stencils.unsafe_stencil</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">unsafe_stencil(x, A::AbstractArray, I) =&gt; Stencil</code></pre><p>Update the neighbors of a stencil to values from the array A around index <code>I</code>, without checking bounds of <code>I</code>. Bounds checking of neighbors still occurs, but with the assumption that <code>I</code> is inbounds.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rafaqz/Stencils.jl/blob/5f1ee34fa4847ff97837f283eec02a702b84a6d6/src/array.jl#L32-L38">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Stencils.rebuild" href="#Stencils.rebuild"><code>Stencils.rebuild</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">rebuild(x::Stencil, neighbors::StaticArray)</code></pre><p>Rebuild a <code>Stencil</code>, returning an stencil of the same size and shape, with new neighbor values.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rafaqz/Stencils.jl/blob/5f1ee34fa4847ff97837f283eec02a702b84a6d6/src/stencil.jl#L48-L53">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Stencils.getneighbor" href="#Stencils.getneighbor"><code>Stencils.getneighbor</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">getneighbor(A::AbstractStencilArray, I::CartesianIndex)</code></pre><p>Get an array value from a stencil neighborhood.</p><p>This method handles boundary conditions.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rafaqz/Stencils.jl/blob/5f1ee34fa4847ff97837f283eec02a702b84a6d6/src/array.jl#L93-L99">source</a></section></article><h2 id="Boundary-Conditions"><a class="docs-heading-anchor" href="#Boundary-Conditions">Boundary Conditions</a><a id="Boundary-Conditions-1"></a><a class="docs-heading-anchor-permalink" href="#Boundary-Conditions" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="Stencils.BoundaryCondition" href="#Stencils.BoundaryCondition"><code>Stencils.BoundaryCondition</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">BoundaryCondition</code></pre><p>Abstract supertype for flags that specify the boundary conditions. These determine what happens when a stencil extends outside of the grid.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rafaqz/Stencils.jl/blob/5f1ee34fa4847ff97837f283eec02a702b84a6d6/src/boundary.jl#L1-L6">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Stencils.Remove" href="#Stencils.Remove"><code>Stencils.Remove</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Remove &lt;: BoundaryCondition

Remove()</code></pre><p><a href="#Stencils.BoundaryCondition"><code>BoundaryCondition</code></a> flag that specifies to assign <code>padval</code> to cells that overflow grid boundaries.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rafaqz/Stencils.jl/blob/5f1ee34fa4847ff97837f283eec02a702b84a6d6/src/boundary.jl#L19-L26">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Stencils.Use" href="#Stencils.Use"><code>Stencils.Use</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Use &lt;: BoundaryCondition

Use()</code></pre><p><a href="#Stencils.BoundaryCondition"><code>BoundaryCondition</code></a> flag that specifies to use the existing  padding, which is only possible when <code>Halo{:in}</code> is used for <code>padding</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rafaqz/Stencils.jl/blob/5f1ee34fa4847ff97837f283eec02a702b84a6d6/src/boundary.jl#L34-L41">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Stencils.Wrap" href="#Stencils.Wrap"><code>Stencils.Wrap</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Wrap &lt;: BoundaryCondition

Wrap()</code></pre><p><a href="#Stencils.BoundaryCondition"><code>BoundaryCondition</code></a> flag to wrap cordinates that boundary boundaries  back to the opposite side of the grid.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rafaqz/Stencils.jl/blob/5f1ee34fa4847ff97837f283eec02a702b84a6d6/src/boundary.jl#L9-L16">source</a></section></article><h2 id="Padding"><a class="docs-heading-anchor" href="#Padding">Padding</a><a id="Padding-1"></a><a class="docs-heading-anchor-permalink" href="#Padding" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="Stencils.Padding" href="#Stencils.Padding"><code>Stencils.Padding</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Padding</code></pre><p>Abstract supertype for padding modes, e.g.  <a href="#Stencils.Conditional"><code>Conditional</code></a> and <a href="#Stencils.Halo"><code>Halo</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rafaqz/Stencils.jl/blob/5f1ee34fa4847ff97837f283eec02a702b84a6d6/src/padding.jl#L1-L6">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Stencils.Conditional" href="#Stencils.Conditional"><code>Stencils.Conditional</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Conditional &lt;: Padding</code></pre><p>Padding that doesn&#39;t change the array size, but checks <code>getindex</code> for out-of-bounds indexing, and inserts <code>padval</code> with <a href="#Stencils.Remove"><code>Remove</code></a> or values from the other side of the array with <a href="#Stencils.Wrap"><code>Wrap</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rafaqz/Stencils.jl/blob/5f1ee34fa4847ff97837f283eec02a702b84a6d6/src/padding.jl#L32-L38">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Stencils.Halo" href="#Stencils.Halo"><code>Stencils.Halo</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Halo{X} &lt;: Padding</code></pre><p>Padding that uses an in-memory halo around the array so that parts of a stencil that go off the edge of the array can index directly into it without a bounds check or any conditional. This has the benefit of possibly better performance during window broadcasts, but some downsides.</p><p>In <code>:out</code> mode, a whole new array is alocated, larger than the original. This may not be worth doing unless you are using it multiple times. with <code>:in</code> mode, the outside edge of the array is used as padding. This may be more accurate  as there are no boundary effects from using a padding value.:w</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">halo_in = Halo(:in)
halo_out = Halo(:out)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rafaqz/Stencils.jl/blob/5f1ee34fa4847ff97837f283eec02a702b84a6d6/src/padding.jl#L9-L27">source</a></section></article><h2 id="Stencil-Arrays"><a class="docs-heading-anchor" href="#Stencil-Arrays">Stencil Arrays</a><a id="Stencil-Arrays-1"></a><a class="docs-heading-anchor-permalink" href="#Stencil-Arrays" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="Stencils.AbstractStencilArray" href="#Stencils.AbstractStencilArray"><code>Stencils.AbstractStencilArray</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">AbstractStencilArray &lt;: StaticArray</code></pre><p>Supertype for arrays with a <a href="#Stencils.Stencil"><code>Stencil</code></a>, a <a href="#Stencils.BoundaryCondition"><code>BoundaryCondition</code></a>, and <a href="#Stencils.Padding"><code>Padding</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rafaqz/Stencils.jl/blob/5f1ee34fa4847ff97837f283eec02a702b84a6d6/src/array.jl#L2-L7">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Stencils.StencilArray" href="#Stencils.StencilArray"><code>Stencils.StencilArray</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">StencilArray &lt;: AbstractStencilArray</code></pre><p>An array with a <a href="#Stencils.Stencil"><code>Stencil</code></a> and a <a href="#Stencils.BoundaryCondition"><code>BoundaryCondition</code></a>, and <a href="#Stencils.Padding"><code>Padding</code></a>.</p><p>For most uses a <code>StencilArray</code> works exactly the same as a regular array.</p><p>Except it can be indexed at any point with <code>stencil</code> to return a filled <code>Stencil</code> object, or <code>neighbors</code> to return an <code>SVector</code> of neighbors.</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">using Stencils, Statistics
sa = StencilArray((1:10) * (10:20)&#39;, Moore(1); boundary=Wrap())
sa .*= 2 # Broadcast works as usual
means = mapstencil(mean, sa) # mapstencil works
stencil(sa, 5, 6) # manually reading a stencil works too

# output

Moore{1, 2, 8, Int64}
█▀█
▀▀▀ 
with neighbors:
8-element StaticArraysCore.SVector{8, Int64} with indices SOneTo(8):
 112
 140
 168
 120
 180
 128
 160
 192</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rafaqz/Stencils.jl/blob/5f1ee34fa4847ff97837f283eec02a702b84a6d6/src/array.jl#L326-L361">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Stencils.AbstractSwitchingStencilArray" href="#Stencils.AbstractSwitchingStencilArray"><code>Stencils.AbstractSwitchingStencilArray</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">AbstractSwitchingStencilArray</code></pre><p>Abstract supertype for <code>AbstractStencilArray</code> that wrap two arrays that  switch places with each broadcast.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rafaqz/Stencils.jl/blob/5f1ee34fa4847ff97837f283eec02a702b84a6d6/src/array.jl#L401-L406">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Stencils.SwitchingStencilArray" href="#Stencils.SwitchingStencilArray"><code>Stencils.SwitchingStencilArray</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">SwitchingStencilArray &lt;: AbstractSwitchingStencilArray</code></pre><p>An <code>AbstractArray</code> with a <a href="#Stencils.Stencil"><code>Stencil</code></a>, a <a href="#Stencils.BoundaryCondition"><code>BoundaryCondition</code></a>, <a href="#Stencils.Padding"><code>Padding</code></a>, and two array layers that are switched with each <code>broadcast_stencil</code> operation.</p><p>The use case for this operation is in simulations where stencil operations are repeatedly run over the same data, or where a filter (such as a blur) needs to be applied many times.</p><p>For most uses a <code>SwitchingStencilArray</code> works exactly the same as a regular array - the <code>dest</code> array can be safely ignored.</p><p>However, when using <code>mapstencil!</code> you need to use the output, not the original array. Switching does not happen in-place, but as a new returned array.</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">using Stencils, Statistics

sa = SwitchingStencilArray(rand(10, 10), Moore(1); boundary=Wrap())
sa .*= 2 # Broadcast works as usual
mapstencil(mean, sa) # As does runing `mapstencils
hood = stencil(sa, 5, 10) # And retreiving a stencil
# But we can also run it in-place, here doing 10 iterations of mean blur:
# Note: if you dont assign new variable with `A =`, the array will
# not switch and will not be blurred.
let sa = sa
    for i in 1:10
        sa = mapstencil!(mean, sa)
    end
end
# output
</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rafaqz/Stencils.jl/blob/5f1ee34fa4847ff97837f283eec02a702b84a6d6/src/array.jl#L417-L453">source</a></section></article><p>Methods on stencil arrays:</p><article class="docstring"><header><a class="docstring-binding" id="Stencils.boundary" href="#Stencils.boundary"><code>Stencils.boundary</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">boundary(A::AbstractStencilArray)</code></pre><p>Get the <a href="#Stencils.BoundaryCondition"><code>BoundaryCondition</code></a> object from an <code>AbstractStencilArray</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rafaqz/Stencils.jl/blob/5f1ee34fa4847ff97837f283eec02a702b84a6d6/src/array.jl#L44-L48">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Stencils.padding" href="#Stencils.padding"><code>Stencils.padding</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">padding(A::AbstractStencilArray)</code></pre><p>Get the <a href="#Stencils.Padding"><code>Padding</code></a> object from an <code>AbstractStencilArray</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rafaqz/Stencils.jl/blob/5f1ee34fa4847ff97837f283eec02a702b84a6d6/src/array.jl#L51-L55">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Stencils.switch" href="#Stencils.switch"><code>Stencils.switch</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">switch(A::SwitchingStencilArray)</code></pre><p>Swap the source and dest of a <code>SwitchingStencilArray</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rafaqz/Stencils.jl/blob/5f1ee34fa4847ff97837f283eec02a702b84a6d6/src/array.jl#L489-L493">source</a></section></article></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Sunday 18 June 2023 00:58">Sunday 18 June 2023</span>. Using Julia version 1.9.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
